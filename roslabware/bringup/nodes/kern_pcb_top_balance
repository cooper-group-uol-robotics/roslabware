# external
import rospy
import sys
from pylabware import TopBalance

if __name__ == "__main__":

    if len(sys.argv) > 1:
        serial_port = sys.argv[1]
    else:
        serial_port = '/dev/ttyUSB0'
        rospy.logwarn('No port provided. Using ttyUSB0 as default port')

    # Initialize ROS node
    rospy.init_node("TopBalance Driver", anonymous=True)

    # Instantiate ROS Wrapper
    kern_ROS = TopBalance(
        device_name=None,
        connection_mode='serial',
        address=None,
        port=serial_port)

    rospy.loginfo("Kern driver started")
    rospy.spin()
